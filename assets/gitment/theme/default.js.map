{"version":3,"sources":["../../src/theme/default.js"],"names":["Date","prototype","format","o","getMonth","getDate","getHours","getMinutes","getSeconds","Math","floor","getMilliseconds","test","replace","RegExp","$1","getFullYear","substr","length","k","renderHeader","instance","meta","user","reactions","container","document","createElement","lang","className","likeButton","likedReaction","find","reaction","content","login","innerHTML","heart","classList","add","onclick","unlike","remove","like","appendChild","commentsCount","comments","issueLink","href","html_url","target","innerText","renderComments","commentReactions","currentPage","error","errorBlock","toLowerCase","owner","initHint","initButton","setAttribute","init","catch","removeAttribute","alert","e","undefined","loading","emptyBlock","commentsList","forEach","createDate","comment","created_at","updateDate","updated_at","commentItem","avatar_url","toString","body_html","querySelector","id","unlikeAComment","likeAComment","imgTrigger","markdownBody","src","onload","clientHeight","maxCommentHeight","style","maxHeight","title","pageCount","ceil","perPage","pagination","previousButton","goto","i","pageItem","nextButton","renderEditor","shouldDisable","disabledTip","isLoggingIn","loginLink","logout","writeField","previewField","textarea","oninput","height","window","getComputedStyle","parseInt","scrollHeight","querySelectorAll","writeTab","previewTab","focus","preview","value","trim","markdown","then","html","submitButton","post","renderFooter","render","state"],"mappings":";;;;;;;;AAAA;;AACA;;AACA;;AAEAA,KAAKC,SAAL,CAAeC,MAAf,GAAwB,UAASA,MAAT,EAAiB;AACvC,MAAIC,IAAI;AACJ,UAAM,KAAKC,QAAL,KAAkB,CADpB,EACuB;AAC3B,UAAM,KAAKC,OAAL,EAFF,EAEkB;AACtB,UAAM,KAAKC,QAAL,EAHF,EAGmB;AACvB,UAAM,KAAKC,UAAL,EAJF,EAIqB;AACzB,UAAM,KAAKC,UAAL,EALF,EAKqB;AACzB,UAAMC,KAAKC,KAAL,CAAW,CAAC,KAAKN,QAAL,KAAkB,CAAnB,IAAwB,CAAnC,CANF,EAMyC;AAC7C,SAAK,KAAKO,eAAL,EAPD,CAOwB;AAPxB,GAAR;AASA,MAAI,OAAOC,IAAP,CAAYV,MAAZ,CAAJ,EAAyB;AACrBA,aAASA,OAAOW,OAAP,CAAeC,OAAOC,EAAtB,EAAyB,CAAC,KAAKC,WAAL,KAAqB,EAAtB,EAA0BC,MAA1B,CAAiC,IAAIH,OAAOC,EAAP,CAAUG,MAA/C,CAAzB,CAAT;AACH;AACD,OAAK,IAAIC,CAAT,IAAchB,CAAd,EAAgB;AACZ,QAAI,IAAIW,MAAJ,CAAW,MAAMK,CAAN,GAAU,GAArB,EAA0BP,IAA1B,CAA+BV,MAA/B,CAAJ,EAA2C;AACvCA,eAASA,OAAOW,OAAP,CAAeC,OAAOC,EAAtB,EAAyBD,OAAOC,EAAP,CAAUG,MAAV,IAAoB,CAApB,GAAwBf,EAAEgB,CAAF,CAAxB,GAA8B,CAAC,OAAOhB,EAAEgB,CAAF,CAAR,EAAcF,MAAd,CAAqB,CAAC,KAAKd,EAAEgB,CAAF,CAAN,EAAYD,MAAjC,CAAvD,CAAT;AACH;AACJ;AACD,SAAOhB,MAAP;AACD,CAnBD;;AAqBA,SAASkB,YAAT,OAAiDC,QAAjD,EAA2D;AAAA,MAAnCC,IAAmC,QAAnCA,IAAmC;AAAA,MAA7BC,IAA6B,QAA7BA,IAA6B;AAAA,MAAvBC,SAAuB,QAAvBA,SAAuB;;AACzD,MAAMC,YAAYC,SAASC,aAAT,CAAuB,KAAvB,CAAlB;AACAF,YAAUG,IAAV,GAAiB,OAAjB;AACAH,YAAUI,SAAV,GAAsB,4CAAtB;;AAEA,MAAMC,aAAaJ,SAASC,aAAT,CAAuB,MAAvB,CAAnB;AACA,MAAMI,gBAAgBP,UAAUQ,IAAV,CAAe;AAAA,WACnCC,SAASC,OAAT,KAAqB,OAArB,IAAgCD,SAASV,IAAT,CAAcY,KAAd,KAAwBZ,KAAKY,KAD1B;AAAA,GAAf,CAAtB;AAGAL,aAAWD,SAAX,GAAuB,yBAAvB;AACAC,aAAWM,SAAX,yCAEKL,gBACC,QADD,GAEC,MAJN,gBAMKT,KAAKE,SAAL,IAAkBF,KAAKE,SAAL,CAAea,KAAjC,wBACef,KAAKE,SAAL,CAAea,KAD9B,uBAEC,EARN;;AAYA,MAAIN,aAAJ,EAAmB;AACjBD,eAAWQ,SAAX,CAAqBC,GAArB,CAAyB,OAAzB;AACAT,eAAWU,OAAX,GAAqB;AAAA,aAAMnB,SAASoB,MAAT,EAAN;AAAA,KAArB;AACD,GAHD,MAGO;AACLX,eAAWQ,SAAX,CAAqBI,MAArB,CAA4B,OAA5B;AACAZ,eAAWU,OAAX,GAAqB;AAAA,aAAMnB,SAASsB,IAAT,EAAN;AAAA,KAArB;AACD;AACDlB,YAAUmB,WAAV,CAAsBd,UAAtB;;AAEA,MAAMe,gBAAgBnB,SAASC,aAAT,CAAuB,MAAvB,CAAtB;AACAkB,gBAAcT,SAAd,eACKd,KAAKwB,QAAL,wBACaxB,KAAKwB,QADlB,0BAED,EAHJ;AAMArB,YAAUmB,WAAV,CAAsBC,aAAtB;;AAEA,MAAME,YAAYrB,SAASC,aAAT,CAAuB,GAAvB,CAAlB;AACAoB,YAAUlB,SAAV,GAAsB,2BAAtB;AACAkB,YAAUC,IAAV,GAAiB1B,KAAK2B,QAAtB;AACAF,YAAUG,MAAV,GAAmB,QAAnB;AACAH,YAAUI,SAAV,GAAsB,YAAtB;AACA1B,YAAUmB,WAAV,CAAsBG,SAAtB;;AAEA,SAAOtB,SAAP;AACD;;AAED,SAAS2B,cAAT,QAAwF/B,QAAxF,EAAkG;AAAA,MAAxEC,IAAwE,SAAxEA,IAAwE;AAAA,MAAlEwB,QAAkE,SAAlEA,QAAkE;AAAA,MAAxDO,gBAAwD,SAAxDA,gBAAwD;AAAA,MAAtCC,WAAsC,SAAtCA,WAAsC;AAAA,MAAzB/B,IAAyB,SAAzBA,IAAyB;AAAA,MAAnBgC,KAAmB,SAAnBA,KAAmB;;AAChG,MAAM9B,YAAYC,SAASC,aAAT,CAAuB,KAAvB,CAAlB;AACAF,YAAUG,IAAV,GAAiB,OAAjB;AACAH,YAAUI,SAAV,GAAsB,8CAAtB;;AAEA,MAAI0B,KAAJ,EAAW;AACT,QAAMC,aAAa9B,SAASC,aAAT,CAAuB,KAAvB,CAAnB;AACA6B,eAAW3B,SAAX,GAAuB,wBAAvB;;AAEA,QAAI0B,8CACChC,KAAKY,KADN,IAECZ,KAAKY,KAAL,CAAWsB,WAAX,OAA6BpC,SAASqC,KAAT,CAAeD,WAAf,EAFlC,EAEgE;AAC9D,UAAME,WAAWjC,SAASC,aAAT,CAAuB,KAAvB,CAAjB;AACA,UAAMiC,aAAalC,SAASC,aAAT,CAAuB,QAAvB,CAAnB;AACAiC,iBAAW/B,SAAX,GAAuB,2BAAvB;AACA+B,iBAAWpB,OAAX,GAAqB,YAAM;AACzBoB,mBAAWC,YAAX,CAAwB,UAAxB,EAAoC,IAApC;AACAxC,iBAASyC,IAAT,GACGC,KADH,CACS,aAAK;AACVH,qBAAWI,eAAX,CAA2B,UAA3B;AACAC,gBAAMC,CAAN;AACD,SAJH;AAKD,OAPD;AAQAN,iBAAWT,SAAX,GAAuB,OAAvB;AACAQ,eAASf,WAAT,CAAqBgB,UAArB;AACAJ,iBAAWZ,WAAX,CAAuBe,QAAvB;AACD,KAjBD,MAiBO;AACLH,iBAAWL,SAAX,GAAuBI,KAAvB;AACD;AACD9B,cAAUmB,WAAV,CAAsBY,UAAtB;AACA,WAAO/B,SAAP;AACD,GA1BD,MA0BO,IAAIqB,aAAaqB,SAAjB,EAA4B;AACjC,QAAMC,UAAU1C,SAASC,aAAT,CAAuB,KAAvB,CAAhB;AACAyC,YAAQjB,SAAR,GAAoB,UAApB;AACAiB,YAAQvC,SAAR,GAAoB,0BAApB;AACAJ,cAAUmB,WAAV,CAAsBwB,OAAtB;AACA,WAAO3C,SAAP;AACD,GANM,MAMA,IAAI,CAACqB,SAAS5B,MAAd,EAAsB;AAC3B,QAAMmD,aAAa3C,SAASC,aAAT,CAAuB,KAAvB,CAAnB;AACA0C,eAAWxC,SAAX,GAAuB,wBAAvB;AACAwC,eAAWlB,SAAX,GAAuB,MAAvB;AACA1B,cAAUmB,WAAV,CAAsByB,UAAtB;AACA,WAAO5C,SAAP;AACD;;AAED,MAAM6C,eAAe5C,SAASC,aAAT,CAAuB,IAAvB,CAArB;AACA2C,eAAazC,SAAb,GAAyB,uBAAzB;;AAEAiB,WAASyB,OAAT,CAAiB,mBAAW;AAC1B,QAAMC,aAAa,IAAIxE,IAAJ,CAASyE,QAAQC,UAAjB,CAAnB;AACA,QAAMC,aAAa,IAAI3E,IAAJ,CAASyE,QAAQG,UAAjB,CAAnB;AACA,QAAMC,cAAcnD,SAASC,aAAT,CAAuB,IAAvB,CAApB;AACAkD,gBAAYhD,SAAZ,GAAwB,iBAAxB;AACAgD,gBAAYzC,SAAZ,wDAC4CqC,QAAQlD,IAAR,CAAa0B,QADzD,iFAEmDwB,QAAQlD,IAAR,CAAauD,UAFhE,yLAM8CL,QAAQlD,IAAR,CAAa0B,QAN3D,wCAOUwB,QAAQlD,IAAR,CAAaY,KAPvB,+EAUqBqC,UAVrB,UAUoC,IAAIxE,IAAJ,CAASwE,UAAT,EAAqBtE,MAArB,CAA4B,qBAA5B,CAVpC,4BAWSsE,WAAWO,QAAX,OAA0BJ,WAAWI,QAAX,EAA1B,mDAC0CJ,UAD1C,uBAEC,EAbV,iFAe2DF,QAAQjD,SAAR,CAAkBa,KAAlB,IAA2B,EAftF,4FAiByDoC,QAAQO,SAjBjE;AAoBA,QAAMlD,aAAa+C,YAAYI,aAAZ,CAA0B,2BAA1B,CAAnB;AACA,QAAMlD,gBAAgBsB,iBAAiBoB,QAAQS,EAAzB,KACjB7B,iBAAiBoB,QAAQS,EAAzB,EAA6BlD,IAA7B,CAAkC;AAAA,aACnCC,SAASC,OAAT,KAAqB,OAArB,IAAgCD,SAASV,IAAT,CAAcY,KAAd,KAAwBZ,KAAKY,KAD1B;AAAA,KAAlC,CADL;AAIA,QAAIJ,aAAJ,EAAmB;AACjBD,iBAAWQ,SAAX,CAAqBC,GAArB,CAAyB,OAAzB;AACAT,iBAAWU,OAAX,GAAqB;AAAA,eAAMnB,SAAS8D,cAAT,CAAwBV,QAAQS,EAAhC,CAAN;AAAA,OAArB;AACD,KAHD,MAGO;AACLpD,iBAAWQ,SAAX,CAAqBI,MAArB,CAA4B,OAA5B;AACAZ,iBAAWU,OAAX,GAAqB;AAAA,eAAMnB,SAAS+D,YAAT,CAAsBX,QAAQS,EAA9B,CAAN;AAAA,OAArB;AACD;;AAED;AACA;AACA,QAAMG,aAAa3D,SAASC,aAAT,CAAuB,KAAvB,CAAnB;AACA,QAAM2D,eAAeT,YAAYI,aAAZ,CAA0B,uBAA1B,CAArB;AACAI,eAAWxD,SAAX,GAAuB,gBAAvB;AACAwD,eAAWE,GAAX,GAAiB,4EAAjB;AACAF,eAAWG,MAAX,GAAoB,YAAM;AACxB,UAAIF,aAAaG,YAAb,GAA4BpE,SAASqE,gBAAzC,EAA2D;AACzDJ,qBAAahD,SAAb,CAAuBC,GAAvB,CAA2B,6BAA3B;AACA+C,qBAAaK,KAAb,CAAmBC,SAAnB,GAA+BvE,SAASqE,gBAAT,GAA4B,IAA3D;AACAJ,qBAAaO,KAAb,GAAqB,iBAArB;AACAP,qBAAa9C,OAAb,GAAuB,YAAM;AAC3B8C,uBAAahD,SAAb,CAAuBI,MAAvB,CAA8B,6BAA9B;AACA4C,uBAAaK,KAAb,CAAmBC,SAAnB,GAA+B,EAA/B;AACAN,uBAAaO,KAAb,GAAqB,EAArB;AACAP,uBAAa9C,OAAb,GAAuB,IAAvB;AACD,SALD;AAMD;AACF,KAZD;AAaAqC,gBAAYjC,WAAZ,CAAwByC,UAAxB;;AAEAf,iBAAa1B,WAAb,CAAyBiC,WAAzB;AACD,GA5DD;;AA8DApD,YAAUmB,WAAV,CAAsB0B,YAAtB;;AAEA,MAAIhD,IAAJ,EAAU;AACR,QAAMwE,YAAYrF,KAAKsF,IAAL,CAAUzE,KAAKwB,QAAL,GAAgBzB,SAAS2E,OAAnC,CAAlB;AACA,QAAIF,YAAY,CAAhB,EAAmB;AACjB,UAAMG,aAAavE,SAASC,aAAT,CAAuB,IAAvB,CAAnB;AACAsE,iBAAWpE,SAAX,GAAuB,6BAAvB;;AAEA,UAAIyB,cAAc,CAAlB,EAAqB;AACnB,YAAM4C,iBAAiBxE,SAASC,aAAT,CAAuB,IAAvB,CAAvB;AACAuE,uBAAerE,SAAf,GAA2B,4BAA3B;AACAqE,uBAAe/C,SAAf,GAA2B,UAA3B;AACA+C,uBAAe1D,OAAf,GAAyB;AAAA,iBAAMnB,SAAS8E,IAAT,CAAc7C,cAAc,CAA5B,CAAN;AAAA,SAAzB;AACA2C,mBAAWrD,WAAX,CAAuBsD,cAAvB;AACD;;AAVgB,iCAYRE,CAZQ;AAaf,YAAMC,WAAW3E,SAASC,aAAT,CAAuB,IAAvB,CAAjB;AACA0E,iBAASxE,SAAT,GAAqB,4BAArB;AACAwE,iBAASlD,SAAT,GAAqBiD,CAArB;AACAC,iBAAS7D,OAAT,GAAmB;AAAA,iBAAMnB,SAAS8E,IAAT,CAAcC,CAAd,CAAN;AAAA,SAAnB;AACA,YAAI9C,gBAAgB8C,CAApB,EAAuBC,SAAS/D,SAAT,CAAmBC,GAAnB,CAAuB,kBAAvB;AACvB0D,mBAAWrD,WAAX,CAAuByD,QAAvB;AAlBe;;AAYjB,WAAK,IAAID,IAAI,CAAb,EAAgBA,KAAKN,SAArB,EAAgCM,GAAhC,EAAqC;AAAA,cAA5BA,CAA4B;AAOpC;;AAED,UAAI9C,cAAcwC,SAAlB,EAA6B;AAC3B,YAAMQ,aAAa5E,SAASC,aAAT,CAAuB,IAAvB,CAAnB;AACA2E,mBAAWzE,SAAX,GAAuB,4BAAvB;AACAyE,mBAAWnD,SAAX,GAAuB,MAAvB;AACAmD,mBAAW9D,OAAX,GAAqB;AAAA,iBAAMnB,SAAS8E,IAAT,CAAc7C,cAAc,CAA5B,CAAN;AAAA,SAArB;AACA2C,mBAAWrD,WAAX,CAAuB0D,UAAvB;AACD;;AAED7E,gBAAUmB,WAAV,CAAsBqD,UAAtB;AACD;AACF;;AAED,SAAOxE,SAAP;AACD;;AAED,SAAS8E,YAAT,QAAuClF,QAAvC,EAAiD;AAAA,MAAzBE,IAAyB,SAAzBA,IAAyB;AAAA,MAAnBgC,KAAmB,SAAnBA,KAAmB;;AAC/C,MAAM9B,YAAYC,SAASC,aAAT,CAAuB,KAAvB,CAAlB;AACAF,YAAUG,IAAV,GAAiB,OAAjB;AACAH,YAAUI,SAAV,GAAsB,4CAAtB;;AAEA,MAAM2E,gBAAgBjF,KAAKY,KAAL,IAAc,CAACoB,KAAf,GAAuB,EAAvB,GAA4B,UAAlD;AACA,MAAMkD,cAAclF,KAAKY,KAAL,GAAa,EAAb,GAAkB,kBAAtC;AACAV,YAAUW,SAAV,iBACOb,KAAKY,KAAL,+CAC2CZ,KAAK0B,QADhD,oFAEiD1B,KAAKuD,UAFtD,2BAICvD,KAAKmF,WAAL,mHAE4CrF,SAASsF,SAFrD,wFALR,0YAmBWpF,KAAKY,KAAL,GACC,gDADD,GAECZ,KAAKmF,WAAL,GACE,eADF,mDAEgDrF,SAASsF,SAFzD,uBArBZ,sMA6B8CF,WA7B9C,UA6B8DD,aA7B9D,qfAwCmDC,WAxCnD,UAwCmED,aAxCnE;AA2CA,MAAIjF,KAAKY,KAAT,EAAgB;AACdV,cAAUwD,aAAV,CAAwB,6BAAxB,EAAuDzC,OAAvD,GAAiE;AAAA,aAAMnB,SAASuF,MAAT,EAAN;AAAA,KAAjE;AACD;;AAED,MAAMC,aAAapF,UAAUwD,aAAV,CAAwB,6BAAxB,CAAnB;AACA,MAAM6B,eAAerF,UAAUwD,aAAV,CAAwB,+BAAxB,CAArB;;AAEA,MAAM8B,WAAWF,WAAW5B,aAAX,CAAyB,UAAzB,CAAjB;AACA8B,WAASC,OAAT,GAAmB,YAAM;AACvBD,aAASpB,KAAT,CAAesB,MAAf,GAAwB,MAAxB;AACA,QAAMtB,QAAQuB,OAAOC,gBAAP,CAAwBJ,QAAxB,EAAkC,IAAlC,CAAd;AACA,QAAME,SAASG,SAASzB,MAAMsB,MAAf,EAAuB,EAAvB,CAAf;AACA,QAAMxB,eAAesB,SAAStB,YAA9B;AACA,QAAM4B,eAAeN,SAASM,YAA9B;AACA,QAAI5B,eAAe4B,YAAnB,EAAiC;AAC/BN,eAASpB,KAAT,CAAesB,MAAf,GAAyBA,SAASI,YAAT,GAAwB5B,YAAzB,GAAyC,IAAjE;AACD;AACF,GATD;;AA1D+C,8BAqEhBhE,UAAU6F,gBAAV,CAA2B,qBAA3B,CArEgB;AAAA;AAAA,MAqExCC,QArEwC;AAAA,MAqE9BC,UArE8B;;AAsE/CD,WAAS/E,OAAT,GAAmB,YAAM;AACvB+E,aAASjF,SAAT,CAAmBC,GAAnB,CAAuB,kBAAvB;AACAiF,eAAWlF,SAAX,CAAqBI,MAArB,CAA4B,kBAA5B;AACAmE,eAAWvE,SAAX,CAAqBI,MAArB,CAA4B,gBAA5B;AACAoE,iBAAaxE,SAAb,CAAuBC,GAAvB,CAA2B,gBAA3B;;AAEAwE,aAASU,KAAT;AACD,GAPD;AAQAD,aAAWhF,OAAX,GAAqB,YAAM;AACzBgF,eAAWlF,SAAX,CAAqBC,GAArB,CAAyB,kBAAzB;AACAgF,aAASjF,SAAT,CAAmBI,MAAnB,CAA0B,kBAA1B;AACAoE,iBAAaxE,SAAb,CAAuBI,MAAvB,CAA8B,gBAA9B;AACAmE,eAAWvE,SAAX,CAAqBC,GAArB,CAAyB,gBAAzB;;AAEA,QAAMmF,UAAUZ,aAAa7B,aAAb,CAA2B,yBAA3B,CAAhB;AACA,QAAM/C,UAAU6E,SAASY,KAAT,CAAeC,IAAf,EAAhB;AACA,QAAI,CAAC1F,OAAL,EAAc;AACZwF,cAAQvE,SAAR,GAAoB,SAApB;AACA;AACD;;AAEDuE,YAAQvE,SAAR,GAAoB,oBAApB;AACA9B,aAASwG,QAAT,CAAkB3F,OAAlB,EACG4F,IADH,CACQ;AAAA,aAAQJ,QAAQtF,SAAR,GAAoB2F,IAA5B;AAAA,KADR;AAED,GAhBD;;AAkBA,MAAMC,eAAevG,UAAUwD,aAAV,CAAwB,wBAAxB,CAArB;AACA+C,eAAaxF,OAAb,GAAuB,YAAM;AAC3BwF,iBAAa7E,SAAb,GAAyB,eAAzB;AACA6E,iBAAanE,YAAb,CAA0B,UAA1B,EAAsC,IAAtC;AACAxC,aAAS4G,IAAT,CAAclB,SAASY,KAAT,CAAeC,IAAf,EAAd,EACGE,IADH,CACQ,gBAAQ;AACZf,eAASY,KAAT,GAAiB,EAAjB;AACAZ,eAASpB,KAAT,CAAesB,MAAf,GAAwB,MAAxB;AACAe,mBAAahE,eAAb,CAA6B,UAA7B;AACAgE,mBAAa7E,SAAb,GAAyB,SAAzB;AACD,KANH,EAOGY,KAPH,CAOS,aAAK;AACVE,YAAMC,CAAN;AACA8D,mBAAahE,eAAb,CAA6B,UAA7B;AACAgE,mBAAa7E,SAAb,GAAyB,SAAzB;AACD,KAXH;AAYD,GAfD;;AAiBA,SAAO1B,SAAP;AACD;;AAED,SAASyG,YAAT,GAAwB;AACtB,MAAMzG,YAAYC,SAASC,aAAT,CAAuB,KAAvB,CAAlB;AACAF,YAAUG,IAAV,GAAiB,OAAjB;AACAH,YAAUI,SAAV,GAAsB,4CAAtB;AACAJ,YAAUW,SAAV;AAMA,SAAOX,SAAP;AACD;;AAED,SAAS0G,MAAT,CAAgBC,KAAhB,EAAuB/G,QAAvB,EAAiC;AAC/B,MAAMI,YAAYC,SAASC,aAAT,CAAuB,KAAvB,CAAlB;AACAF,YAAUG,IAAV,GAAiB,OAAjB;AACAH,YAAUI,SAAV,GAAsB,0CAAtB;AACAJ,YAAUmB,WAAV,CAAsBvB,SAASD,YAAT,CAAsBgH,KAAtB,EAA6B/G,QAA7B,CAAtB;AACAI,YAAUmB,WAAV,CAAsBvB,SAAS+B,cAAT,CAAwBgF,KAAxB,EAA+B/G,QAA/B,CAAtB;AACAI,YAAUmB,WAAV,CAAsBvB,SAASkF,YAAT,CAAsB6B,KAAtB,EAA6B/G,QAA7B,CAAtB;AACAI,YAAUmB,WAAV,CAAsBvB,SAAS6G,YAAT,CAAsBE,KAAtB,EAA6B/G,QAA7B,CAAtB;AACA,SAAOI,SAAP;AACD;;kBAEc,EAAE0G,cAAF,EAAU/G,0BAAV,EAAwBgC,8BAAxB,EAAwCmD,0BAAxC,EAAsD2B,0BAAtD,E","file":"default.js","sourcesContent":["import { github as githubIcon, heart as heartIcon, spinner as spinnerIcon } from '../icons'\nimport { NOT_INITIALIZED_ERROR } from '../constants'\nimport {toJS} from 'mobx';\n\nDate.prototype.format = function(format) {\n  var o = {\n      \"M+\": this.getMonth() + 1, //month\n      \"d+\": this.getDate(), //day\n      \"h+\": this.getHours(), //hour\n      \"m+\": this.getMinutes(), //minute\n      \"s+\": this.getSeconds(), //second\n      \"q+\": Math.floor((this.getMonth() + 3) / 3), //quarter\n      \"S\": this.getMilliseconds() //millisecond\n  }\n  if (/(y+)/.test(format)) {\n      format = format.replace(RegExp.$1,(this.getFullYear() + \"\").substr(4 - RegExp.$1.length));\n  }\n  for (var k in o){\n      if (new RegExp(\"(\" + k + \")\").test(format)){\n          format = format.replace(RegExp.$1,RegExp.$1.length == 1 ? o[k] :(\"00\" + o[k]).substr((\"\" + o[k]).length));\n      }\n  }\n  return format;\n}\n\nfunction renderHeader({ meta, user, reactions }, instance) {\n  const container = document.createElement('div')\n  container.lang = \"en-US\"\n  container.className = 'gitment-container gitment-header-container'\n\n  const likeButton = document.createElement('span')\n  const likedReaction = reactions.find(reaction => (\n    reaction.content === 'heart' && reaction.user.login === user.login\n  ))\n  likeButton.className = 'gitment-header-like-btn'\n  likeButton.innerHTML = `\n    ${heartIcon}\n    ${ likedReaction\n      ? 'Unlike'\n      : 'Like'\n    }\n    ${ meta.reactions && meta.reactions.heart\n      ? ` • <strong>${meta.reactions.heart}</strong> Liked`\n      : ''\n    }\n  `\n\n  if (likedReaction) {\n    likeButton.classList.add('liked')\n    likeButton.onclick = () => instance.unlike()\n  } else {\n    likeButton.classList.remove('liked')\n    likeButton.onclick = () => instance.like()\n  }\n  container.appendChild(likeButton)\n\n  const commentsCount = document.createElement('span')\n  commentsCount.innerHTML = `\n    ${ meta.comments\n    ? ` • <strong>${meta.comments}</strong> Comments`\n    : ''\n    }\n  `\n  container.appendChild(commentsCount)\n\n  const issueLink = document.createElement('a')\n  issueLink.className = 'gitment-header-issue-link'\n  issueLink.href = meta.html_url\n  issueLink.target = '_blank'\n  issueLink.innerText = 'Issue Page'\n  container.appendChild(issueLink)\n\n  return container\n}\n\nfunction renderComments({ meta, comments, commentReactions, currentPage, user, error }, instance) {\n  const container = document.createElement('div')\n  container.lang = \"en-US\"\n  container.className = 'gitment-container gitment-comments-container'\n\n  if (error) {\n    const errorBlock = document.createElement('div')\n    errorBlock.className = 'gitment-comments-error'\n\n    if (error === NOT_INITIALIZED_ERROR\n      && user.login\n      && user.login.toLowerCase() === instance.owner.toLowerCase()) {\n      const initHint = document.createElement('div')\n      const initButton = document.createElement('button')\n      initButton.className = 'gitment-comments-init-btn'\n      initButton.onclick = () => {\n        initButton.setAttribute('disabled', true)\n        instance.init()\n          .catch(e => {\n            initButton.removeAttribute('disabled')\n            alert(e)\n          })\n      }\n      initButton.innerText = '初始化评论'\n      initHint.appendChild(initButton)\n      errorBlock.appendChild(initHint)\n    } else {\n      errorBlock.innerText = error\n    }\n    container.appendChild(errorBlock)\n    return container\n  } else if (comments === undefined) {\n    const loading = document.createElement('div')\n    loading.innerText = '加载评论中...'\n    loading.className = 'gitment-comments-loading'\n    container.appendChild(loading)\n    return container\n  } else if (!comments.length) {\n    const emptyBlock = document.createElement('div')\n    emptyBlock.className = 'gitment-comments-empty'\n    emptyBlock.innerText = '暂无评论'\n    container.appendChild(emptyBlock)\n    return container\n  }\n\n  const commentsList = document.createElement('ul')\n  commentsList.className = 'gitment-comments-list'\n\n  comments.forEach(comment => {\n    const createDate = new Date(comment.created_at)\n    const updateDate = new Date(comment.updated_at)\n    const commentItem = document.createElement('li')\n    commentItem.className = 'gitment-comment'\n    commentItem.innerHTML = `\n      <a class=\"gitment-comment-avatar\" href=\"${comment.user.html_url}\" target=\"_blank\">\n        <img class=\"gitment-comment-avatar-img\" src=\"${comment.user.avatar_url}\"/>\n      </a>\n      <div class=\"gitment-comment-main\" style=\"text-align:left\">\n        <div class=\"gitment-comment-header\">\n          <a class=\"gitment-comment-name\" href=\"${comment.user.html_url}\" target=\"_blank\">\n            ${comment.user.login}\n          </a>\n          创建于\n          <span title=\"${createDate}\">${new Date(createDate).format('yyyy-MM-dd hh:mm:ss')}</span>\n          ${ createDate.toString() !== updateDate.toString()\n            ? ` • <span title=\"comment was edited at ${updateDate}\">edited</span>`\n            : ''\n          }\n          <div class=\"gitment-comment-like-btn\">${heartIcon} ${comment.reactions.heart || ''}</div>\n        </div>\n        <div class=\"gitment-comment-body gitment-markdown\">${comment.body_html}</div>\n      </div>\n    `\n    const likeButton = commentItem.querySelector('.gitment-comment-like-btn')\n    const likedReaction = commentReactions[comment.id]\n      && commentReactions[comment.id].find(reaction => (\n        reaction.content === 'heart' && reaction.user.login === user.login\n      ))\n    if (likedReaction) {\n      likeButton.classList.add('liked')\n      likeButton.onclick = () => instance.unlikeAComment(comment.id)\n    } else {\n      likeButton.classList.remove('liked')\n      likeButton.onclick = () => instance.likeAComment(comment.id)\n    }\n\n    // dirty\n    // use a blank image to trigger height calculating when element rendered\n    const imgTrigger = document.createElement('img')\n    const markdownBody = commentItem.querySelector('.gitment-comment-body')\n    imgTrigger.className = 'gitment-hidden'\n    imgTrigger.src = \"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\"\n    imgTrigger.onload = () => {\n      if (markdownBody.clientHeight > instance.maxCommentHeight) {\n        markdownBody.classList.add('gitment-comment-body-folded')\n        markdownBody.style.maxHeight = instance.maxCommentHeight + 'px'\n        markdownBody.title = 'Click to Expand'\n        markdownBody.onclick = () => {\n          markdownBody.classList.remove('gitment-comment-body-folded')\n          markdownBody.style.maxHeight = ''\n          markdownBody.title = ''\n          markdownBody.onclick = null\n        }\n      }\n    }\n    commentItem.appendChild(imgTrigger)\n\n    commentsList.appendChild(commentItem)\n  })\n\n  container.appendChild(commentsList)\n\n  if (meta) {\n    const pageCount = Math.ceil(meta.comments / instance.perPage)\n    if (pageCount > 1) {\n      const pagination = document.createElement('ul')\n      pagination.className = 'gitment-comments-pagination'\n\n      if (currentPage > 1) {\n        const previousButton = document.createElement('li')\n        previousButton.className = 'gitment-comments-page-item'\n        previousButton.innerText = 'Previous'\n        previousButton.onclick = () => instance.goto(currentPage - 1)\n        pagination.appendChild(previousButton)\n      }\n\n      for (let i = 1; i <= pageCount; i++) {\n        const pageItem = document.createElement('li')\n        pageItem.className = 'gitment-comments-page-item'\n        pageItem.innerText = i\n        pageItem.onclick = () => instance.goto(i)\n        if (currentPage === i) pageItem.classList.add('gitment-selected')\n        pagination.appendChild(pageItem)\n      }\n\n      if (currentPage < pageCount) {\n        const nextButton = document.createElement('li')\n        nextButton.className = 'gitment-comments-page-item'\n        nextButton.innerText = 'Next'\n        nextButton.onclick = () => instance.goto(currentPage + 1)\n        pagination.appendChild(nextButton)\n      }\n\n      container.appendChild(pagination)\n    }\n  }\n\n  return container\n}\n\nfunction renderEditor({ user, error }, instance) {\n  const container = document.createElement('div')\n  container.lang = \"en-US\"\n  container.className = 'gitment-container gitment-editor-container'\n\n  const shouldDisable = user.login && !error ? '' : 'disabled'\n  const disabledTip = user.login ? '' : 'Login to Comment'\n  container.innerHTML = `\n      ${ user.login\n        ? `<a class=\"gitment-editor-avatar\" href=\"${user.html_url}\" target=\"_blank\">\n            <img class=\"gitment-editor-avatar-img\" src=\"${user.avatar_url}\"/>\n          </a>`\n        : user.isLoggingIn\n          ? `<div class=\"gitment-editor-avatar\">${spinnerIcon}</div>`\n          : `<a class=\"gitment-editor-avatar\" href=\"${instance.loginLink}\" title=\"login with GitHub\">\n              ${githubIcon}\n            </a>`\n      }\n    </a>\n    <div class=\"gitment-editor-main\">\n      <div class=\"gitment-editor-header\" style=\"text-align:left\">\n        <nav class=\"gitment-editor-tabs\">\n          <button class=\"gitment-editor-tab gitment-selected\">评论</button>\n          <button class=\"gitment-editor-tab\">预览</button>\n        </nav>\n        <div class=\"gitment-editor-login\">\n          ${ user.login\n            ? '<a class=\"gitment-editor-logout-link\">退出登录</a>'\n            : user.isLoggingIn\n              ? 'Logging in...'\n              : `<a class=\"gitment-editor-login-link\" href=\"${instance.loginLink}\">登录</a>`\n          }\n        </div>\n      </div>\n      <div class=\"gitment-editor-body\">\n        <div class=\"gitment-editor-write-field\">\n          <textarea placeholder=\"发表评论\" title=\"${disabledTip}\" ${shouldDisable}></textarea>\n        </div>\n        <div class=\"gitment-editor-preview-field gitment-hidden\">\n          <div class=\"gitment-editor-preview gitment-markdown\" style=\"text-align:left;\"></div>\n        </div>\n      </div>\n    </div>\n    <div class=\"gitment-editor-footer\">\n      <a class=\"gitment-editor-footer-tip\" href=\"https://guides.github.com/features/mastering-markdown/\" target=\"_blank\">\n        支持 Markdown\n      </a>\n      <button class=\"gitment-editor-submit\" title=\"${disabledTip}\" ${shouldDisable}>发表评论</button>\n    </div>\n  `\n  if (user.login) {\n    container.querySelector('.gitment-editor-logout-link').onclick = () => instance.logout()\n  }\n\n  const writeField = container.querySelector('.gitment-editor-write-field')\n  const previewField = container.querySelector('.gitment-editor-preview-field')\n\n  const textarea = writeField.querySelector('textarea')\n  textarea.oninput = () => {\n    textarea.style.height = 'auto'\n    const style = window.getComputedStyle(textarea, null)\n    const height = parseInt(style.height, 10)\n    const clientHeight = textarea.clientHeight\n    const scrollHeight = textarea.scrollHeight\n    if (clientHeight < scrollHeight) {\n      textarea.style.height = (height + scrollHeight - clientHeight) + 'px'\n    }\n  }\n\n  const [writeTab, previewTab] = container.querySelectorAll('.gitment-editor-tab')\n  writeTab.onclick = () => {\n    writeTab.classList.add('gitment-selected')\n    previewTab.classList.remove('gitment-selected')\n    writeField.classList.remove('gitment-hidden')\n    previewField.classList.add('gitment-hidden')\n\n    textarea.focus()\n  }\n  previewTab.onclick = () => {\n    previewTab.classList.add('gitment-selected')\n    writeTab.classList.remove('gitment-selected')\n    previewField.classList.remove('gitment-hidden')\n    writeField.classList.add('gitment-hidden')\n\n    const preview = previewField.querySelector('.gitment-editor-preview')\n    const content = textarea.value.trim()\n    if (!content) {\n      preview.innerText = '暂无内容可预览'\n      return\n    }\n\n    preview.innerText = 'Loading preview...'\n    instance.markdown(content)\n      .then(html => preview.innerHTML = html)\n  }\n\n  const submitButton = container.querySelector('.gitment-editor-submit')\n  submitButton.onclick = () => {\n    submitButton.innerText = 'Submitting...'\n    submitButton.setAttribute('disabled', true)\n    instance.post(textarea.value.trim())\n      .then(data => {\n        textarea.value = ''\n        textarea.style.height = 'auto'\n        submitButton.removeAttribute('disabled')\n        submitButton.innerText = 'Comment'\n      })\n      .catch(e => {\n        alert(e)\n        submitButton.removeAttribute('disabled')\n        submitButton.innerText = 'Comment'\n      })\n  }\n\n  return container\n}\n\nfunction renderFooter() {\n  const container = document.createElement('div')\n  container.lang = \"en-US\"\n  container.className = 'gitment-container gitment-footer-container'\n  container.innerHTML = `\n    Powered by\n    <a class=\"gitment-footer-project-link\" href=\"https://github.com/imsun/gitment\" target=\"_blank\">\n      Gitment\n    </a>\n  `\n  return container\n}\n\nfunction render(state, instance) {\n  const container = document.createElement('div')\n  container.lang = \"en-US\"\n  container.className = 'gitment-container gitment-root-container'\n  container.appendChild(instance.renderHeader(state, instance))\n  container.appendChild(instance.renderComments(state, instance))\n  container.appendChild(instance.renderEditor(state, instance))\n  container.appendChild(instance.renderFooter(state, instance))\n  return container\n}\n\nexport default { render, renderHeader, renderComments, renderEditor, renderFooter }\n"]}